{"version":3,"file":"classlist.js","sources":["pages/classlist/classlist.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2xhc3NsaXN0L2NsYXNzbGlzdC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"classlist\">\r\n\t\t<view class=\"loadingLayout\" v-if=\"!classList.length && !noData\">\r\n\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\r\n\t\t</view>\r\n\t\t<view class=\"content\">\r\n\t\t\t<navigator :url=\"'/pages/preview/preview?id=' + item._id\" class=\"item\" v-for=\"item in classList\"\r\n\t\t\t:key=\"item._id\">\r\n\t\t\t\t<image :src=\"item.smallPicurl\" mode=\"aspectFill\"></image>\r\n\t\t\t</navigator>\r\n\t\t</view>\r\n\t\t<view class=\"loadingLayout\" v-if=\"classList.length || noData\">\r\n\t\t\t<uni-load-more :status=\" noData ? 'noMore':'loading'\"></uni-load-more>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\nimport { ref } from 'vue';\r\nimport {onLoad, onReachBottom} from \"@dcloudio/uni-app\"\r\nimport {apiGetClassList} from \"@/apis/apis.js\"\r\nconst classList = ref([])\r\nconst noData = ref(false)\r\n//获取url传递的id\r\nconst queryParams = {\r\n\tpageNum:1,\r\n\tpageSize:12\r\n}\r\nonLoad((e)=>{\r\n\tlet {id=null,name=null} = e;\r\n\tqueryParams.classid = id;\r\n\tuni.setNavigationBarTitle({\r\n\t\ttitle:name\r\n\t})\r\n\t//onLoad加载在setup语法糖之后\r\n\tgetClassList();\r\n})\r\n//获取分类列表\r\nconst getClassList =async ()=>{\r\n\tconst res =await apiGetClassList(queryParams);\r\n\tclassList.value =[...classList.value , ...res.data.data];\r\n\tif(queryParams.pageSize>res.data.data.length){\r\n\t\tnoData.value = true\r\n\t}\r\n\tuni.setStorageSync(\"storgClassList\",classList.value);\r\n}\r\n//触底加载更多\r\nonReachBottom(()=>{\r\n\tif(noData.value) return;\r\n\tqueryParams.pageNum++\r\n\tgetClassList();\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.classlist{\r\n\t\t.content{\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: repeat(3,1fr);\r\n\t\t\tgap: 5rpx;\r\n\t\t\tpadding: 5rpx 5rpx;\r\n\t\t\t.item{\r\n\t\t\t\theight: 440rpx;\r\n\t\t\t    image{\r\n\t\t\t    width: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}       \r\n</style>\r\n","import MiniProgramPage from 'C:/Users/liu/Desktop/wx小程序/WallPaper/pages/classlist/classlist.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","apiGetClassList","onReachBottom"],"mappings":";;;;;;;;;;;;;;AAqBA,UAAM,YAAYA,cAAG,IAAC,EAAE;AACxB,UAAM,SAASA,cAAG,IAAC,KAAK;AAExB,UAAM,cAAc;AAAA,MACnB,SAAQ;AAAA,MACR,UAAS;AAAA,IACV;AACAC,kBAAM,OAAC,CAAC,MAAI;AACX,UAAI,EAAC,KAAG,MAAK,OAAK,KAAI,IAAI;AAC1B,kBAAY,UAAU;AACtBC,oBAAAA,MAAI,sBAAsB;AAAA,QACzB,OAAM;AAAA,MACR,CAAE;AAED;IACD,CAAC;AAED,UAAM,eAAc,YAAU;AAC7B,YAAM,MAAK,MAAMC,0BAAgB,WAAW;AAC5C,gBAAU,QAAO,CAAC,GAAG,UAAU,OAAQ,GAAG,IAAI,KAAK,IAAI;AACvD,UAAG,YAAY,WAAS,IAAI,KAAK,KAAK,QAAO;AAC5C,eAAO,QAAQ;AAAA,MACf;AACDD,oBAAAA,MAAI,eAAe,kBAAiB,UAAU,KAAK;AAAA,IACpD;AAEAE,kBAAAA,cAAc,MAAI;AACjB,UAAG,OAAO;AAAO;AACjB,kBAAY;AACZ;IACD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;AClDD,GAAG,WAAW,eAAe;"}