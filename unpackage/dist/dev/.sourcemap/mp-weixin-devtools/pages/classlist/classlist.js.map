{"version":3,"names":["classList","common_vendor","ref","noData","pageName","queryParams","pageNum","pageSize","onLoad","e","_e$id","id","_e$name","name","_e$type","type","classid","index","setNavigationBarTitle","title","getClassList","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","res","wrap","_callee$","_context","prev","next","apis_apis","apiGetClassList","sent","apiGetHistoryList","value","concat","_toConsumableArray2","data","length","setStorageSync","stop","apply","arguments","onReachBottom","onShareAppMessage","path","onShareTimeline","query","wx","createPage","MiniProgramPage"],"sources":["classlist.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2xhc3NsaXN0L2NsYXNzbGlzdC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"classlist\">\r\n\t\t<view class=\"loadingLayout\" v-if=\"!classList.length && !noData\">\r\n\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\r\n\t\t</view>\r\n\t\t<view class=\"content\">\r\n\t\t\t<navigator :url=\"'/pages/preview/preview?id=' + item._id\" class=\"item\" v-for=\"item in classList\"\r\n\t\t\t:key=\"item._id\">\r\n\t\t\t\t<image :src=\"item.smallPicurl\" mode=\"aspectFill\"></image>\r\n\t\t\t</navigator>\r\n\t\t</view>\r\n\t\t<view class=\"loadingLayout\" v-if=\"classList.length || noData\">\r\n\t\t\t<uni-load-more :status=\" noData ? 'noMore':'loading'\"></uni-load-more>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\nimport { ref } from 'vue';\r\nimport {onLoad, onReachBottom,onShareAppMessage,onShareTimeline} from \"@dcloudio/uni-app\"\r\nimport {apiGetClassList,apiGetHistoryList} from \"@/apis/apis.js\"\r\nconst classList = ref([])\r\nconst noData = ref(false)\r\nlet pageName;\r\n//获取url传递的id\r\nconst queryParams = {\r\n\tpageNum:1,\r\n\tpageSize:12\r\n}\r\nonLoad((e)=>{\r\n\tlet {id=null,name=null,type=null} = e;\r\n\tif(type) queryParams.type = type;\r\n\tif(id) queryParams.classid = id;\r\n\tpageName = name\r\n\tuni.setNavigationBarTitle({\r\n\t\ttitle:name\r\n\t})\r\n\t//onLoad加载在setup语法糖之后\r\n\tgetClassList();\r\n})\r\n//获取分类列表\r\nconst getClassList =async ()=>{\r\n\tlet res;\r\n\tif(queryParams.classid){\r\n\t\tres =await apiGetClassList(queryParams);\r\n\t}\r\n\tif(queryParams.type){\r\n\t\tres =await apiGetHistoryList(queryParams);\r\n\t}\r\n\tclassList.value =[...classList.value , ...res.data.data];\r\n\tif(queryParams.pageSize>res.data.data.length){\r\n\t\tnoData.value = true\r\n\t}\r\n\tuni.setStorageSync(\"storgClassList\",classList.value);\r\n}\r\n//触底加载更多\r\nonReachBottom(()=>{\r\n\tif(noData.value) return;\r\n\tqueryParams.pageNum++\r\n\tgetClassList();\r\n})\r\n\r\n\r\n//分享给好友\r\nonShareAppMessage((e)=>{\r\n\treturn{\r\n\t\ttitle:\"壁纸\",\r\n\t\tpath:\"/pages/classlist/classlist?id=\"+queryParams.classid+\"&name=\"+pageName\r\n\t}\r\n})\r\n//分享到朋友圈\r\nonShareTimeline(()=>{\r\n\treturn{\r\n\t\ttitle:\"壁纸\",\r\n\t\tquery:\"id=\"+queryParams.classid+\"&name=\"+pageName\r\n\t}\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.classlist{\r\n\t\t.content{\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: repeat(3,1fr);\r\n\t\t\tgap: 5rpx;\r\n\t\t\tpadding: 5rpx 5rpx;\r\n\t\t\t.item{\r\n\t\t\t\theight: 440rpx;\r\n\t\t\t    image{\r\n\t\t\t    width: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}       \r\n</style>\r\n","import MiniProgramPage from 'C:/Users/liu/Desktop/wx小程序/WallPaper/pages/classlist/classlist.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;;;;;;;;;;;;;;;IAqBA,IAAAA,SAAA,GAAAC,aAAA,CAAAC,GAAA;IACA,IAAAC,MAAA,GAAAF,aAAA,CAAAC,GAAA;IACA,IAAAE,QAAA;IAEA,IAAAC,WAAA;MACAC,OAAA;MACAC,QAAA;IACA;IACAN,aAAA,CAAAO,MAAA,WAAAC,CAAA;MACA,IAAAC,KAAA,GAAAD,CAAA,CAAAE,EAAA;QAAAA,EAAA,GAAAD,KAAA,qBAAAA,KAAA;QAAAE,OAAA,GAAAH,CAAA,CAAAI,IAAA;QAAAA,IAAA,GAAAD,OAAA,qBAAAA,OAAA;QAAAE,OAAA,GAAAL,CAAA,CAAAM,IAAA;QAAAA,IAAA,GAAAD,OAAA,qBAAAA,OAAA;MACA,IAAAC,IAAA,EAAAV,WAAA,CAAAU,IAAA,GAAAA,IAAA;MACA,IAAAJ,EAAA,EAAAN,WAAA,CAAAW,OAAA,GAAAL,EAAA;MACAP,QAAA,GAAAS,IAAA;MACAZ,aAAA,CAAAgB,KAAA,CAAAC,qBAAA;QACAC,KAAA,EAAAN;MACA;MAEAO,YAAA;IACA;IAEA,IAAAA,YAAA;MAAA,IAAAC,IAAA,GAAAC,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,GAAA;QAAA,OAAAH,oBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAA,KAEA1B,WAAA,CAAAW,OAAA;gBAAAa,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OACAC,SAAA,CAAAC,eAAA,CAAA5B,WAAA;YAAA;cAAAqB,GAAA,GAAAG,QAAA,CAAAK,IAAA;YAAA;cAAA,KAEA7B,WAAA,CAAAU,IAAA;gBAAAc,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OACAC,SAAA,CAAAG,iBAAA,CAAA9B,WAAA;YAAA;cAAAqB,GAAA,GAAAG,QAAA,CAAAK,IAAA;YAAA;cAEAlC,SAAA,CAAAoC,KAAA,MAAAC,MAAA,CAAAC,mBAAA,CAAAtC,SAAA,CAAAoC,KAAA,GAAAE,mBAAA,CAAAZ,GAAA,CAAAa,IAAA,CAAAA,IAAA;cACA,IAAAlC,WAAA,CAAAE,QAAA,GAAAmB,GAAA,CAAAa,IAAA,CAAAA,IAAA,CAAAC,MAAA;gBACArC,MAAA,CAAAiC,KAAA;cACA;cACAnC,aAAA,CAAAgB,KAAA,CAAAwB,cAAA,mBAAAzC,SAAA,CAAAoC,KAAA;YAAA;YAAA;cAAA,OAAAP,QAAA,CAAAa,IAAA;UAAA;QAAA,GAAAjB,OAAA;MAAA,CACA;MAAA,gBAbAL,aAAA;QAAA,OAAAC,IAAA,CAAAsB,KAAA,OAAAC,SAAA;MAAA;IAAA,GAaA;IAEA3C,aAAA,CAAA4C,aAAA;MACA,IAAA1C,MAAA,CAAAiC,KAAA;MACA/B,WAAA,CAAAC,OAAA;MACAc,YAAA;IACA;IAIAnB,aAAA,CAAA6C,iBAAA,WAAArC,CAAA;MACA;QACAU,KAAA;QACA4B,IAAA,qCAAA1C,WAAA,CAAAW,OAAA,cAAAZ;MACA;IACA;IAEAH,aAAA,CAAA+C,eAAA;MACA;QACA7B,KAAA;QACA8B,KAAA,UAAA5C,WAAA,CAAAW,OAAA,cAAAZ;MACA;IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3EA8C,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}