{"version":3,"names":["goPreview","item","_id","common_vendor","index","showToast","title","icon","navigateTo","url","concat","classid","goDetail","bannerList","ref","dayRandom","noticeList","classfiyList","getbanner","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","res","wrap","_callee$","_context","prev","next","apis_apis","apiGetBanner","sent","value","data","t0","__f__","stop","apply","arguments","getDayRandom","_ref2","_callee2","_callee2$","_context2","apiDayRandom","map","_objectSpread2","id","categoryId","getNotice","_ref3","_callee3","_callee3$","_context3","apiGetNotice","select","getClassify","_ref4","_callee4","_callee4$","_context4","apiGetClassify","onMounted","onShareAppMessage","path","onShareTimeline","wx","createPage","MiniProgramPage"],"sources":["index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"homeLayout pageBg\">\n    <custom-nav-bar title=\"推荐\"></custom-nav-bar>\n    <view class=\"banner\">\n      <swiper indicator-dots \n        indicator-color=\"rgba(255,255,255,0.5)\" \n        indicator-active-color=\"#fff\"\n        autoplay\n        circular>\n        <swiper-item v-for=\"item in bannerList\" :key=\"item._id\">\n          <image :src=\"item.picurl\" mode=\"\"></image>\n        </swiper-item>\n      </swiper>\n    </view>\n    <view class=\"notice\" @click=\"goDetail\">\n      <view class=\"left\">\n        <uni-icons type=\"sound-filled\" size=\"20\" color=\"$brand-theme-color\"></uni-icons>\n        <text class=\"text\">公告</text>\n      </view>\n      <view class=\"center\">\n        <swiper  \n          autoplay\n          circular\n          vertical\n          interval=\"1500\"\n          duration=\"300\">\n          <swiper-item v-for=\"item in noticeList\" :key=\"item._id\">{{item.title}}</swiper-item>\n        </swiper>\n      </view>\n      <view class=\"right\">\n        <uni-icons type=\"right\" size=\"16\" color=\"#333\"></uni-icons>\n      </view>\n    </view>\n    <view class=\"select\">\n      <common-title>\n        <template #name>每日推荐</template>\n        <template #custom>\n          <view class=\"date\">\n            <uni-icons type=\"calendar-filled\" size=\"18\" color=\"#28b389\"></uni-icons>\n            <view class=\"text\">\n              <uni-dateformat :date=\"Date.now()\" format=\"dd日\"></uni-dateformat>\n            </view>\n          </view>\n        </template>\n      </common-title>\n      <view class=\"content\">\n        <scroll-view scroll-x>\n          <view class=\"box\" v-for=\"item in dayRandom\" :key=\"item._id\">\n            <image \n              :src=\"item.smallPicurl\" \n              mode=\"aspectFill\" \n              @click=\"() => goPreview(item)\"></image>\n          </view>\n        </scroll-view>\n      </view>\n    </view>\n    <view class=\"theme\">\n      <common-title>\n        <template #name>专题精选</template>\n        <template #custom>\n          <navigator url=\"\" class=\"more\">More+</navigator>\n        </template>\n      </common-title>\n    </view>\n    <view class=\"content1\">\n      <theme-item v-for=\"item in classfiyList\" \n        :key=\"item._id\"\n        :item=\"item\"></theme-item>\n      <theme-item :isMore=\"true\"></theme-item>\n    </view>\n    <view class=\"safe-area-inset-bottom\"></view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { onShareAppMessage, onShareTimeline } from \"@dcloudio/uni-app\"\nimport { apiGetBanner, apiDayRandom, apiGetNotice, apiGetClassify } from \"../../apis/apis\"\n\n// 跳转预览页\nconst goPreview = (item) => {\n  if (!item?._id) {\n    uni.showToast({\n      title: '数据加载中，请稍候',\n      icon: 'none'\n    })\n    return\n  }\n  \n  uni.navigateTo({\n    url: `/pages/preview/preview?id=${item._id}&classid=${item.classid || ''}`\n  })\n}\n\n// 跳转公告详情\nconst goDetail = () => {\n  uni.navigateTo({\n    url: \"/pages/notice/detail\"\n  })\n}\n\n// 数据定义\nconst bannerList = ref([])\nconst dayRandom = ref([])\nconst noticeList = ref([])\nconst classfiyList = ref([])\n\n// 获取轮播图\nconst getbanner = async () => {\n  try {\n    let res = await apiGetBanner()\n    bannerList.value = res.data.data || []\n  } catch (e) {\n    console.error('获取轮播图失败:', e)\n  }\n}\n\n// 获取每日推荐\nconst getDayRandom = async () => {\n  try {\n    const res = await apiDayRandom()\n    dayRandom.value = (res.data.data || []).map(item => ({\n      ...item,\n      // 确保有_id和classid字段\n      _id: item._id || item.id,\n      classid: item.classid || item.categoryId || ''\n    }))\n  } catch (e) {\n    console.error('获取每日推荐失败:', e)\n  }\n}\n\n// 获取公告\nconst getNotice = async () => {\n  try {\n    const res = await apiGetNotice({ select: true })\n    noticeList.value = res.data.data || []\n  } catch (e) {\n    console.error('获取公告失败:', e)\n  }\n}\n\n// 获取分类\nconst getClassify = async () => {\n  try {\n    const res = await apiGetClassify({ select: true })\n    classfiyList.value = res.data.data || []\n  } catch (e) {\n    console.error('获取分类失败:', e)\n  }\n}\n\n// 初始化数据\nonMounted(() => {\n  getbanner()\n  getDayRandom()\n  getNotice()\n  getClassify()\n})\n\n// 分享给好友\nonShareAppMessage(() => {\n  return {\n    title: \"壁纸\",\n    path: \"/pages/index/index\"\n  }\n})\n\n// 分享到朋友圈\nonShareTimeline(() => {\n  return {\n    title: \"壁纸\",\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.homeLayout {\n  .banner {\n    width: 750rpx;\n    padding: 30rpx 0;\n    swiper {\n      width: 750rpx;\n      height: 340rpx;\n      swiper-item {\n        width: 100%;\n        height: 100%;\n        padding: 0 30rpx;\n        image {\n          width: 100%;\n          height: 100%;\n          border-radius: 10rpx;\n        }\n      }\n    }\n  }\n  .notice {\n    width: 690rpx;\n    height: 80rpx;\n    line-height: 80rpx;\n    background: #f9f9f9;\n    margin: 0 auto;\n    border-radius: 80rpx;\n    display: flex;\n    .left {\n      width: 140rpx;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      .text {\n        color: $brand-theme-color;\n        font-weight: 600;\n        font-size: 28rpx;\n      }\n    }\n    .center {\n      flex: 1;\n      swiper {\n        height: 100%;\n        swiper-item {\n          height: 100%;\n          font-size: 30rpx;\n          color: #666;\n          overflow: hidden;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n        }\n      }\n    }\n    .right {\n      width:70rpx\n    }\n  }\n  .select {\n    padding-top: 50rpx;\t\n    .date {\n      color: $brand-theme-color;\n      display: flex;\n      align-items: center;\n      .text {\n        margin-left: 5rpx;\n      }\n    }\n    .content {\n      width: 720rpx;\n      margin-left: 30rpx;\n      margin-top: 30rpx;\n      scroll-view {\n        white-space:nowrap;\n        .box {\n          width: 200rpx;\n          height: 430rpx;\n          display: inline-block;\n          margin-right: 15rpx;\n          image {\n            width: 100%;\n            height: 100%;\n            border-radius: 10rpx;\n            &:active {\n              opacity: 0.9;\n            }\n          }\n        }\n        .box:last-child {\n          margin-right: 30rpx;\n        }\n      }\n    }\n  }\n  .theme {\n    padding-top:30rpx;\n    .more {\n      font-size: 32rpx;\n      color: #888;\n    }\n  }\n  .content1 {\n    padding: 30rpx 30rpx;\n    display: grid;\n    gap:15rpx;\n    grid-template-columns: repeat(3,1fr);\n  }\n}\n</style>","import MiniProgramPage from 'C:/Users/liu/Desktop/wx小程序/WallPaper/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAgFA,IAAAA,SAAA,YAAAA,UAAAC,IAAA;MACA,MAAAA,IAAA,oBAAAA,IAAA,CAAAC,GAAA;QACAC,aAAA,CAAAC,KAAA,CAAAC,SAAA;UACAC,KAAA;UACAC,IAAA;QACA;QACA;MACA;MAEAJ,aAAA,CAAAC,KAAA,CAAAI,UAAA;QACAC,GAAA,+BAAAC,MAAA,CAAAT,IAAA,CAAAC,GAAA,eAAAQ,MAAA,CAAAT,IAAA,CAAAU,OAAA;MACA;IACA;IAGA,IAAAC,QAAA,YAAAA,SAAA;MACAT,aAAA,CAAAC,KAAA,CAAAI,UAAA;QACAC,GAAA;MACA;IACA;IAGA,IAAAI,UAAA,GAAAV,aAAA,CAAAW,GAAA;IACA,IAAAC,SAAA,GAAAZ,aAAA,CAAAW,GAAA;IACA,IAAAE,UAAA,GAAAb,aAAA,CAAAW,GAAA;IACA,IAAAG,YAAA,GAAAd,aAAA,CAAAW,GAAA;IAGA,IAAAI,SAAA;MAAA,IAAAC,IAAA,GAAAC,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,GAAA;QAAA,OAAAH,oBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEAC,SAAA,CAAAC,YAAA;YAAA;cAAAP,GAAA,GAAAG,QAAA,CAAAK,IAAA;cACAnB,UAAA,CAAAoB,KAAA,GAAAT,GAAA,CAAAU,IAAA,CAAAA,IAAA;cAAAP,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAQ,EAAA,GAAAR,QAAA;cAEAxB,aAAA,CAAAC,KAAA,CAAAgC,KAAA,sDAAAT,QAAA,CAAAQ,EAAA;YAAA;YAAA;cAAA,OAAAR,QAAA,CAAAU,IAAA;UAAA;QAAA,GAAAd,OAAA;MAAA,CAEA;MAAA,gBAPAL,UAAA;QAAA,OAAAC,IAAA,CAAAmB,KAAA,OAAAC,SAAA;MAAA;IAAA,GAOA;IAGA,IAAAC,YAAA;MAAA,IAAAC,KAAA,GAAArB,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,UAAAoB,SAAA;QAAA,IAAAlB,GAAA;QAAA,OAAAH,oBAAA,GAAAI,IAAA,UAAAkB,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAhB,IAAA,GAAAgB,SAAA,CAAAf,IAAA;YAAA;cAAAe,SAAA,CAAAhB,IAAA;cAAAgB,SAAA,CAAAf,IAAA;cAAA,OAEAC,SAAA,CAAAe,YAAA;YAAA;cAAArB,GAAA,GAAAoB,SAAA,CAAAZ,IAAA;cACAjB,SAAA,CAAAkB,KAAA,IAAAT,GAAA,CAAAU,IAAA,CAAAA,IAAA,QAAAY,GAAA,WAAA7C,IAAA;gBAAA,OAAA8C,cAAA,CAAAA,cAAA,KACA9C,IAAA;kBAAA;kBAEAC,GAAA,EAAAD,IAAA,CAAAC,GAAA,IAAAD,IAAA,CAAA+C,EAAA;kBACArC,OAAA,EAAAV,IAAA,CAAAU,OAAA,IAAAV,IAAA,CAAAgD,UAAA;gBAAA;cAAA,CACA;cAAAL,SAAA,CAAAf,IAAA;cAAA;YAAA;cAAAe,SAAA,CAAAhB,IAAA;cAAAgB,SAAA,CAAAT,EAAA,GAAAS,SAAA;cAEAzC,aAAA,CAAAC,KAAA,CAAAgC,KAAA,uDAAAQ,SAAA,CAAAT,EAAA;YAAA;YAAA;cAAA,OAAAS,SAAA,CAAAP,IAAA;UAAA;QAAA,GAAAK,QAAA;MAAA,CAEA;MAAA,gBAZAF,aAAA;QAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;MAAA;IAAA,GAYA;IAGA,IAAAW,SAAA;MAAA,IAAAC,KAAA,GAAA/B,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,UAAA8B,SAAA;QAAA,IAAA5B,GAAA;QAAA,OAAAH,oBAAA,GAAAI,IAAA,UAAA4B,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAA1B,IAAA,GAAA0B,SAAA,CAAAzB,IAAA;YAAA;cAAAyB,SAAA,CAAA1B,IAAA;cAAA0B,SAAA,CAAAzB,IAAA;cAAA,OAEAC,SAAA,CAAAyB,YAAA;gBAAAC,MAAA;cAAA;YAAA;cAAAhC,GAAA,GAAA8B,SAAA,CAAAtB,IAAA;cACAhB,UAAA,CAAAiB,KAAA,GAAAT,GAAA,CAAAU,IAAA,CAAAA,IAAA;cAAAoB,SAAA,CAAAzB,IAAA;cAAA;YAAA;cAAAyB,SAAA,CAAA1B,IAAA;cAAA0B,SAAA,CAAAnB,EAAA,GAAAmB,SAAA;cAEAnD,aAAA,CAAAC,KAAA,CAAAgC,KAAA,qDAAAkB,SAAA,CAAAnB,EAAA;YAAA;YAAA;cAAA,OAAAmB,SAAA,CAAAjB,IAAA;UAAA;QAAA,GAAAe,QAAA;MAAA,CAEA;MAAA,gBAPAF,UAAA;QAAA,OAAAC,KAAA,CAAAb,KAAA,OAAAC,SAAA;MAAA;IAAA,GAOA;IAGA,IAAAkB,WAAA;MAAA,IAAAC,KAAA,GAAAtC,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,UAAAqC,SAAA;QAAA,IAAAnC,GAAA;QAAA,OAAAH,oBAAA,GAAAI,IAAA,UAAAmC,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAjC,IAAA,GAAAiC,SAAA,CAAAhC,IAAA;YAAA;cAAAgC,SAAA,CAAAjC,IAAA;cAAAiC,SAAA,CAAAhC,IAAA;cAAA,OAEAC,SAAA,CAAAgC,cAAA;gBAAAN,MAAA;cAAA;YAAA;cAAAhC,GAAA,GAAAqC,SAAA,CAAA7B,IAAA;cACAf,YAAA,CAAAgB,KAAA,GAAAT,GAAA,CAAAU,IAAA,CAAAA,IAAA;cAAA2B,SAAA,CAAAhC,IAAA;cAAA;YAAA;cAAAgC,SAAA,CAAAjC,IAAA;cAAAiC,SAAA,CAAA1B,EAAA,GAAA0B,SAAA;cAEA1D,aAAA,CAAAC,KAAA,CAAAgC,KAAA,qDAAAyB,SAAA,CAAA1B,EAAA;YAAA;YAAA;cAAA,OAAA0B,SAAA,CAAAxB,IAAA;UAAA;QAAA,GAAAsB,QAAA;MAAA,CAEA;MAAA,gBAPAF,YAAA;QAAA,OAAAC,KAAA,CAAApB,KAAA,OAAAC,SAAA;MAAA;IAAA,GAOA;IAGAwB,SAAA;MACA7C,SAAA;MACAsB,YAAA;MACAU,SAAA;MACAO,WAAA;IACA;IAGAtD,aAAA,CAAA6D,iBAAA;MACA;QACA1D,KAAA;QACA2D,IAAA;MACA;IACA;IAGA9D,aAAA,CAAA+D,eAAA;MACA;QACA5D,KAAA;MACA;IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5KA6D,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}